<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Writing plugins · LogDevice</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;hr&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Writing plugins · LogDevice"/><meta property="og:type" content="website"/><meta property="og:url" content="https://logdevice.io/index.html"/><meta property="og:description" content="&lt;hr&gt;
"/><meta property="og:image" content="https://logdevice.io/img/logdevice_og.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://logdevice.io/img/logdevice.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://logdevice.io/blog/atom.xml" title="LogDevice Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://logdevice.io/blog/feed.xml" title="LogDevice Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/facebook_logdevice_whitewordmark.png" alt="LogDevice"/></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/Overview.html" target="_self">Docs</a></li><li class=""><a href="/api/annotated.html" target="_self">API</a></li><li class=""><a href="/help.html" target="_self">Support</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Extending LogDevice</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting started</h3><ul><li class="navListItem"><a class="navItem" href="/docs/Overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/Concepts.html">Concepts and architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/Terminology.html">Terminology</a></li><li class="navListItem"><a class="navItem" href="/docs/Installation.html">Installation</a></li><li class="navListItem"><a class="navItem" href="/docs/LocalCluster.html">Running a local cluster</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Configuration</h3><ul><li class="navListItem"><a class="navItem" href="/docs/FirstCluster.html">Creating your first cluster</a></li><li class="navListItem"><a class="navItem" href="/docs/Config.html">Cluster configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/Settings.html">Settings</a></li><li class="navListItem"><a class="navItem" href="/docs/Logs.html">Log configuration</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Administration</h3><ul><li class="navListItem"><a class="navItem" href="/docs/LDShell.html">LogDevice Shell</a></li><li class="navListItem"><a class="navItem" href="/docs/LDQuery.html">LDQuery</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">API</h3><ul><li class="navListItem"><a class="navItem" href="/docs/API_Intro.html">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/API_Doxygen.html">Reference</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Extending LogDevice</h3><ul><li class="navListItem navListItemActive"><a class="navItem" href="/docs/WritingPlugins.html">Writing plugins</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Writing plugins</h1></header><article><div><span><hr>
<p>The LogDevice plugin system lets developers add new functionality to LogDevice.
Examples of plugins include:</p>
<ul>
<li>a statistics publisher that collects LogDevice counters</li>
<li>trace logger that traces both server- and client-side events</li>
<li>configuration plugin that loads a configuration file and notifies LogDevice
when it changes</li>
<li>build info plugin that exposes build-related information</li>
<li>location plugin that determines the location of the client in the network
topology.</li>
</ul>
<p>A plugin is an object that is characterized by plugin type. Plugin type defines
which functionality the plugin is implementing and each type corresponds to a
particular type-specific interface that a plugin should implement.</p>
<p>Read this article if you want to write a plugin or if you want to understand
what kind of functionality can be incorporated into a plugin.</p>
<p>Some plugins are built and provided as part of LogDevice. These are:</p>
<ul>
<li><code>BuiltinConfigSourceFactory</code>, which creates <code>FileConfigSource</code> and
<code>ZookeeperConfigSource</code> - the <code>ConfigSource</code>s used to load configuration from
files or ZooKeeper.</li>
<li><code>BuildInfo</code>, which only exposes <code>LOGDEVICE_VERSION</code> in the <code>version</code> field.</li>
</ul>
<h1><a class="anchor" aria-hidden="true" id="general-guidance-on-writing-plugins"></a><a href="#general-guidance-on-writing-plugins" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>General guidance on writing plugins</h1>
<h2><a class="anchor" aria-hidden="true" id="how-do-i-write-a-plugin"></a><a href="#how-do-i-write-a-plugin" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How do I write a plugin?</h2>
<p>As described in <a href="#plugin-types">Plugin types</a>, there are a number of predefined
plugin types. Look at the list of plugin types and choose the one you want to
implement. This document describes how you can write a new plugin of an existing
type.</p>
<p>A plugin is implemented by deriving a class from the base/interface class for
the type (<code>StatsPublisherFactory</code>, <code>TraceLoggerFactory</code>, etc.),  and overriding
the methods that implement the corresponding functionality. You should also
override the <code>identifier()</code> and <code>displayName()</code> methods. The value returned by
<code>identifier()</code> will be used to identify the plugin - you cannot load more than
one plugin that has the same <code>{type(), identifier()}</code> tuple. The value returned
by <code>displayName()</code> will be used for debug output listing the plugins that are
loaded.</p>
<h2><a class="anchor" aria-hidden="true" id="how-do-i-make-logdevice-pick-up-my-plugin"></a><a href="#how-do-i-make-logdevice-pick-up-my-plugin" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How do I make LogDevice pick up my plugin?</h2>
<p>Build your plugin into a static library and link it to the binary.  Define a
<code>logdevice_plugin()</code> function in the global namespace that returns a raw pointer
to the heap-allocated plugin instance and export it, e.g., like this:</p>
<pre><code class="hljs css language-c++"><span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> __attribute__((__used__)) facebook::logdevice::<span class="hljs-function">Plugin*
<span class="hljs-title">logdevice_plugin</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> MySpecialPlugin();
}
</code></pre>
<p>You may need to specify some additional linker options in order to make sure
that this unused symbol isn't dropped when linking.</p>
<p>If you would like to export several plugins,  combine them into a
<code>PluginProvider</code>-derived plugin (a special type that provides other plugins) and
export that instead.</p>
<p>At the moment LogDevice allows only one plugin of each type to be loaded (aside
from built-in plugins listed in the section above). In the future this may be
changed so that you can load multiple plugins of the same type and pick which
specific plugin you want to use for each plugin type using the configuration
file (see
<a href="https://github.com/facebookincubator/LogDevice/issues/57">issue #57 on github</a>).
Another planned future improvement here is loading plugins via dynamic libraries
instead of static linking (see
<a href="https://github.com/facebookincubator/LogDevice/issues/56">issue #56 on github</a>).</p>
<h2><a class="anchor" aria-hidden="true" id="considerations-when-writing-a-plugin"></a><a href="#considerations-when-writing-a-plugin" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Considerations when writing a plugin</h2>
<ul>
<li>All method calls on a plugin should be thread-safe.</li>
<li>Make your plugin objects as lightweight as possible. Servers and clients load
all available plugins, even if not all of them will be used. During
construction, don't create threads, allocate chunks of memory, perform heavy
I/O, or execute blocking operations.</li>
<li>All calls to plugin methods (and methods on objects created by plugins) should
be non-blocking. Blocking I/O (e.g., posting data to an external system) or
long-running operations should execute on a separate thread(s).</li>
</ul>
<h1><a class="anchor" aria-hidden="true" id="plugin-types"></a><a href="#plugin-types" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Plugin types</h1>
<p>For a complete up-to-date list of plugin types, refer to
<a href="https://github.com/facebookincubator/LogDevice/blob/master/logdevice/common/plugin/plugin_types.inc"><code>common/plugin/plugin_types.inc</code></a>
under the logdevice source tree.</p>
<p>These are the major plugin types that are most likely to be useful to LogDevice
users.</p>
<h2><a class="anchor" aria-hidden="true" id="stats-publisher-factory"></a><a href="#stats-publisher-factory" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Stats Publisher Factory</h2>
<p>This plugin allows you to collect LogDevice stats (counters) from a LogDevice
instance. These allow you to get some insight into various aspect of LogDevice
servers and clients, and can be used to answer questions like:</p>
<ul>
<li>how many appends is a client making?</li>
<li>how many appends are going into the node?</li>
<li>what's the write throughput in bytes?</li>
<li>what's the append latency like?</li>
<li>are appends succeeding?</li>
<li>if they are failing, what are the reasons for failures?</li>
<li>how many records have been read from the node (or have been received by the
client)?</li>
<li>what's the read throughput in bytes?</li>
<li>are there any stalled readers?</li>
<li>is rebuilding going on in the cluster?</li>
</ul>
<p>For a full list of counters and their descriptions, refer to <code>.inc</code> files under
<a href="https://github.com/facebookincubator/LogDevice/blob/master/logdevice/common/stats/"><code>common/stats/</code></a>.</p>
<p>The plugin should be a factory which creates an object that implements the
<code>StatsPublisher</code> interface (see
<a href="https://github.com/facebookincubator/LogDevice/blob/master/logdevice/common/StatsPublisher.h"><code>common/StatsPublisher.h</code></a>).</p>
<p>Publishing stats is based on a push model . Roughly every
<code>stats-collection-interval</code> (see <a href="/docs/Settings.html">list of settings</a>),
<code>StatsCollectionThread</code> calls the <code>publish()</code> method on the publisher with fresh
stats and a copy of previously submitted stats (so that the publisher can
calculate deltas). <code>StatsPublisher</code> would typically define a class that derives
from <code>Stats::EnumerationCallbacks</code>. That class would define callbacks that are
called for each different type of counter. The <code>StatsPublisher</code> implementation
would then call <code>Stats::enumerate()</code> with an instance of that type.</p>
<h2><a class="anchor" aria-hidden="true" id="trace-logger-factory"></a><a href="#trace-logger-factory" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Trace Logger Factory</h2>
<p>This plugin allows you to trace various events, or a sample of them, in
LogDevice.</p>
<p>Tracers can broadly be separated by behavior into 3 categories:</p>
<ul>
<li>Not sampled. Every call to such tracer leads to an emitted trace to
<code>TraceLogger</code></li>
<li>Sampled. Only a fraction of calls to such a tracer lead to an emitted trace.
The sampling rate can be configured via the config file.</li>
<li>Throttled. Each logging entity (typically client) is only allowed to issue a
certain number of traces per time interval. When that number is exceeded, no
more traces are emitted until the next time interval starts.</li>
</ul>
<p>Current tracers include:</p>
<ul>
<li>Server-side
<ul>
<li><em>Appender</em>. Traces appends on the server side. Sampled.</li>
<li><em>FindKey</em>. Traces received findtime/findkey calls. Sampled.</li>
<li><em>Client Info Tracer</em>. Traces all incoming connections from clients.
Sampled.</li>
<li><em>Logs Config API Tracer</em>. Traces calls to Logs Config API. Sampled.</li>
<li><em>Slow storage task tracer</em>. Traces storage tasks. Sampled, weighted by
task duration (longer tasks are more likely to get sampled).</li>
<li><em>Rebuilding</em>. Traces rebuilding of records. Sampled.</li>
<li><em>Rebuilding events</em>. Traces events such as starting/completing/aborting
rebuilding for a given log, etc. Not sampled.</li>
<li><em>Metadata</em>. Traces each sequencer activation / reprovisioning of metadata
/ metadata log write. Not sampled.</li>
<li><em>Boycott</em>. Traces sequencer boycotts. Not sampled.</li>
<li><em>Purging</em>. Traces purging of records on storage nodes. Throttled.</li>
</ul></li>
<li>Client-side
<ul>
<li><em>Client append tracer</em>. Traces appends on the client-side. Sampled.</li>
<li><em>Reads</em>. Traces reads of records by the client. Sampled.</li>
<li><em>API hits</em>. Traces various LogDevice API calls, such as findtime,
get-tail-attributes, is-log-empty, trim, etc. Sampled.</li>
<li><em>Stalled reader tracer</em>. For readers that are unhealthy, emits a trace
every 60 seconds with their state. Throttled.</li>
<li><em>Reader flow tracer</em>. For every reader, generates a trace every
<code>client-readers-flow-tracer-period</code> with various stats describing the
reader's state. Sampled.</li>
<li><em>Dataloss gap tracer</em>. Traces delivery of data loss gaps by the client.
Throttled.</li>
</ul></li>
</ul>
<p>The plugin is a factory that creates an object that implements the <code>TraceLogger</code>
interface (see
<a href="https://github.com/facebookincubator/LogDevice/blob/master/logdevice/common/TraceLogger.h"><code>common/TraceLogger.h</code></a>).
Tracers will call the <code>pushSample()</code> method on this object to emit a trace.</p>
<h2><a class="anchor" aria-hidden="true" id="config-source-factory"></a><a href="#config-source-factory" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Config Source Factory</h2>
<p>This plugin allows you to implement custom backends for loading the
configuration file and notifying LogDevice when it changes. You can consult
<code>FileConfigSource</code> and <code>ZookeeperConfigSource</code> as reference implementations.</p>
<p>The plugin is a factory that creates an object that implements the
<code>ConfigSource</code> interface (see
<a href="https://github.com/facebookincubator/LogDevice/blob/master/logdevice/common/ConfigSource.h"><code>common/ConfigSource.h</code></a>)</p>
<h2><a class="anchor" aria-hidden="true" id="build-info"></a><a href="#build-info" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Build Info</h2>
<p>This plugin allows you to expose build-related information (which package
includes LogDevice, which version has been built, when, by whom, etc.). This
information can then be used for debugging if tracers are used (e.g., see the
Client Info Tracer under the trace logger factory).</p>
<p>The plugin should derive from the <code>BuildInfo</code> class and override its methods.</p>
<h2><a class="anchor" aria-hidden="true" id="location-provider"></a><a href="#location-provider" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Location provider</h2>
<p>This plugin is used on the client to determine the location of the client in the
network topology. Currently this is only used to determine whether to use SSL or
not for a particular connection (because that depends on the <code>ssl-boundary</code>
setting and the locations of both peers).</p>
<p>The plugin should implement the <code>LocationProvider</code> interface.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/API_Doxygen.html"><span class="arrow-prev">← </span><span>Reference</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#how-do-i-write-a-plugin">How do I write a plugin?</a></li><li><a href="#how-do-i-make-logdevice-pick-up-my-plugin">How do I make LogDevice pick up my plugin?</a></li><li><a href="#considerations-when-writing-a-plugin">Considerations when writing a plugin</a></li><li><a href="#stats-publisher-factory">Stats Publisher Factory</a></li><li><a href="#trace-logger-factory">Trace Logger Factory</a></li><li><a href="#config-source-factory">Config Source Factory</a></li><li><a href="#build-info">Build Info</a></li><li><a href="#location-provider">Location provider</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/logdevice.svg" alt="LogDevice" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/Overview.html">Getting Started</a><a href="/docs/FirstCluster.html">Creating your first cluster</a><a href="/api/annotated.html">C++ API Reference</a></div><div><h5>Community</h5><a href="https://facebook.com/groups/logdevice.oss/">LogDevice Users Group</a><a href="http://stackoverflow.com/questions/tagged/logdevice" target="_blank" rel="noreferrer noopener">Stack Overflow</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/facebookincubator/LogDevice">GitHub</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2018 Facebook</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'f0ece773627cb7003a57c0edd6ec7dd8',
                indexName: 'logdevice',
                inputSelector: '#search_input_react'
              });
            </script></body></html>