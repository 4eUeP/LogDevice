<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Creating your first cluster · LogDevice</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## 1. Provision the servers"/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Creating your first cluster · LogDevice"/><meta property="og:type" content="website"/><meta property="og:url" content="https://logdevice.io/index.html"/><meta property="og:description" content="## 1. Provision the servers"/><meta property="og:image" content="https://logdevice.io/img/logdevice_og.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://logdevice.io/img/logdevice.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/dracula.min.css"/><link rel="alternate" type="application/atom+xml" href="https://logdevice.io/blog/atom.xml" title="LogDevice Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://logdevice.io/blog/feed.xml" title="LogDevice Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-137238014-1', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,700"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/facebook_logdevice_whitewordmark.png" alt="LogDevice"/></a><a href="/versions.html"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/next/Overview.html" target="_self">Docs</a></li><li class=""><a href="/api/annotated.html" target="_self">API</a></li><li class=""><a href="/help.html" target="_self">Support</a></li><li class=""><a href="https://github.com/facebookincubator/LogDevice" target="_self">GitHub</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Configuration</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Getting started<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/Overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/next/LocalCluster.html">Quickstart</a></li><li class="navListItem"><a class="navItem" href="/docs/next/Concepts.html">Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/next/Installation.html">Build LogDevice</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Configuration<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem navListItemActive"><a class="navItem" href="/docs/next/FirstCluster.html">Creating your first cluster</a></li><li class="navListItem"><a class="navItem" href="/docs/next/Kubernetes.html">Running on Kubernetes</a></li><li class="navListItem"><a class="navItem" href="/docs/next/Config.html">Cluster configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/next/Settings.html">Settings</a></li><li class="navListItem"><a class="navItem" href="/docs/next/Logs.html">Log configuration</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Administration<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/administration/AdminServer.html">Admin Server (Control Plane)</a></li><li class="navListItem"><a class="navItem" href="/docs/next/administration/LDShell.html">LogDevice Shell</a></li><li class="navListItem"><a class="navItem" href="/docs/next/administration/LDQuery.html">LDQuery</a></li><li class="navListItem"><a class="navItem" href="/docs/next/administration/ClusterMaintenance.html">Cluster Maintenance</a></li><li class="navListItem"><a class="navItem" href="/docs/next/administration/SafetyChecker.html">Operations Safety Checker</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Concepts<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/Writepath.html">Write path</a></li><li class="navListItem"><a class="navItem" href="/docs/next/ReadPath.html">Read path</a></li><li class="navListItem"><a class="navItem" href="/docs/next/Terminology.html">Terminology</a></li><li class="navListItem"><a class="navItem" href="/docs/next/Consensus.html">Distributed consensus</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Designs<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/FailureDetection.html">Failure detection</a></li><li class="navListItem"><a class="navItem" href="/docs/next/Replication.html">Log replication configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/next/Recovery.html">Recovery after the failure of a sequencer</a></li><li class="navListItem"><a class="navItem" href="/docs/next/TrafficShaping.html">Traffic shaping</a></li><li class="navListItem"><a class="navItem" href="/docs/next/Rebuilding.html">Rebuilding</a></li><li class="navListItem"><a class="navItem" href="/docs/next/LogsDB.html">LogsDB</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">API<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/API_Introduction.html">Client library API</a></li><li class="navListItem"><a class="navItem" href="/docs/next/API_Doxygen.html">Reference</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Extending LogDevice<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/WritingPlugins.html">Writing plugins</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Creating your first cluster</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="1-provision-the-servers"></a><a href="#1-provision-the-servers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. Provision the servers</h2>
<p>The recommended minimum for running a fully functional LogDevice cluster is 4 servers. If you want to try out LogDevice on a single machine for development or experimental purposes, you can follow a much simpler process to <a href="/docs/next/LocalCluster.html">run a local cluster</a> instead.</p>
<p>Each LogDevice server should have at least 4GB of RAM. For best results the network latency between the servers in the cluster should be low.</p>
<p>The only platform currently supported is Ubuntu 18 LTS &quot;Bionic Beaver&quot;.</p>
<p>Make sure that network ports that you choose are open. We recommend that you use the default ports (<code>4440</code>, <code>4441</code>, <code>4443</code>, <code>6440</code>) Also, the nodes have to be able to communicate with ZooKeeper.</p>
<p><strong>Note:</strong> This simple tutorial sets up a cluster without any security controls. You should restrict network access to these ports using other means (like a firewall or NAT) to prevent your cluster being open to the world.</p>
<h2><a class="anchor" aria-hidden="true" id="2-set-up-a-zookeeper-ensemble"></a><a href="#2-set-up-a-zookeeper-ensemble" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Set up a ZooKeeper ensemble</h2>
<p>LogDevice requires ZooKeeper in order to store minimal per-log metadata accessed during sequencer activation and failover.  ZooKeeper can also be used as a mechanism for distributing the config file (see the <a href="#5-create-a-configuration-file">Configuration section</a> below).</p>
<blockquote>
<p>You can re-use an existing ZooKeeper ensemble, or create a new one. Different LogDevice clusters can use the same ZooKeeper ensemble as long as they have different values in the <code>cluster</code> attribute in the LogDevice configuration file.</p>
</blockquote>
<p>You can run ZooKeeper on the same system as LogDevice or on separate hardware. For best results, latency from the LogDevice cluster to the ZooKeeper ensemble should be minimal. However, LogDevice doesn't communicate with ZooKeeper outside of config loading / sequencer activation / failover scenarios, so having higher latency to ZooKeeper shouldn't affect performance in steady state.</p>
<blockquote>
<p>You can find a tutorial online on how to set up a proper Zookeeper ensemble. Note that <strong>if the metadata in the ZooKeeper ensemble is lost, the data in the cluster will be corrupted and unreadable</strong>.</p>
</blockquote>
<h4><a class="anchor" aria-hidden="true" id="unsafe-single-node-zookeeper-setup-on-ubuntu"></a><a href="#unsafe-single-node-zookeeper-setup-on-ubuntu" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Unsafe single-node ZooKeeper setup on Ubuntu</h4>
<p>If you are just setting up a test LogDevice cluster and are OK with it becoming unusable and losing all your data if you lose your ZooKeeper node, you can set up a single-node Zookeeper ensemble easily on Ubuntu by running this:</p>
<pre><code class="hljs css language-sh">sudo apt-get update &amp;&amp; sudo apt-get install zookeeper zookeeperd
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="3-distribute-logdevice-to-the-servers"></a><a href="#3-distribute-logdevice-to-the-servers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. Distribute LogDevice to the servers</h2>
<p>You can use the Docker image or build LogDevice yourself.</p>
<h3><a class="anchor" aria-hidden="true" id="option-1-use-docker-image-recommended"></a><a href="#option-1-use-docker-image-recommended" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Option 1. Use Docker image [Recommended]</h3>
<p>Get the LogDevice Docker image. You can use the default <code>latest</code> tag for the
nightly build. Or pull the latest stable release</p>
<pre><code class="hljs css language-sh">docker pull facebookincubator/logdevice
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="option-2-build-logdevice"></a><a href="#option-2-build-logdevice" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Option 2. Build LogDevice</h3>
<p>Follow the steps at <a href="/docs/next/Installation.html">Build LogDevice</a> to build and install LogDevice.</p>
<h2><a class="anchor" aria-hidden="true" id="4-create-data-folders-on-storage-nodes"></a><a href="#4-create-data-folders-on-storage-nodes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. Create data folders on storage nodes</h2>
<p>Storage nodes store data in shards. Typically each shard maps to a different physical disk. The example commands below create a user and a typical folder structure for LogDevice, and should be run on each storage node. They assume that your data disk is mounted on <code>/mnt/data0</code>. The recommended filesystem to be used for data storage in LogDevice is XFS.</p>
<pre><code class="hljs css language-sh"><span class="hljs-comment"># creates the root folder for data</span>
sudo mkdir -p /data/logdevice/

<span class="hljs-comment"># writes the number of shards that this box will have</span>
<span class="hljs-built_in">echo</span> 1 | sudo tee /data/logdevice/NSHARDS

<span class="hljs-comment"># creates symlink for shard 0</span>
sudo ln -s /mnt/data0 /data/logdevice/shard0

<span class="hljs-comment"># Adds the user for the logdevice daemon</span>
sudo useradd logdevice

<span class="hljs-comment"># changes ownership for the data directory and the disk</span>
sudo chown -R logdevice /data/logdevice/
sudo chown -R logdevice /mnt/data0/
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="5-create-a-configuration-file"></a><a href="#5-create-a-configuration-file" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5. Create a configuration file</h2>
<p>An example of a minimal configuration file with a 3-node ZooKeeper
ensemble hosted on the same machine can be found below (and is also included
in the source tree under <code>logdevice/examples/logdevice.conf</code>).</p>
<p>Modify it to adapt it to your situation and save it to a file somewhere
(e.g. <code>~/logdevice_test.conf</code>). The parts that you need to modify are:</p>
<ol>
<li><code>cluster</code> attribute to reflect your cluster name.</li>
<li><code>zookeeper_uri</code> in the <code>zookeeper</code> section - list of ZooKeeper ensemble nodes and ports.</li>
<li><code>internal_logs</code> make sure that you are comfortable with the replication
policy for these critical logs and adjust if necessary.</li>
</ol>
<p>Detailed explanations of all the attributes can be found in the
<a href="/docs/next/Config.html">Cluster configuration</a> docs.</p>
<h2><a class="anchor" aria-hidden="true" id="6-store-the-configuration-file"></a><a href="#6-store-the-configuration-file" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>6. Store the configuration file</h2>
<p>All LogDevice nodes have to have access to the configuration file when starting.
They monitor the file for changes and pick up (most) changes without being restarted,
so ideally they should have access to it while running as well.
There are different ways to ensure this. One option is to store the file on a
shared network filesystem or distribute with chef, ansible, or similar methods.</p>
<p>LogDevice <em>currently</em> have support for loading configuration files from
zookeeper. In this case you can manually put the configuration file in zookeeper
via the <code>zkCli.sh</code> utility that comes with zookeeper.</p>
<pre><code class="hljs css language-shell-session"><span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/zookeeper/</span>bin<span class="hljs-regexp">/zkCli.sh create /</span>logdevice_test.conf <span class="hljs-string">"`cat ~/logdevice_test.conf`"</span>
</code></pre>
<p>If you need to modify the config in ZooKeeper after you've created it, use the <code>set</code> command instead of <code>create</code>:</p>
<pre><code class="hljs css language-shell-session"><span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/zookeeper/</span>bin<span class="hljs-regexp">/zkCli.sh set /</span>logdevice_test.conf <span class="hljs-string">"`cat ~/logdevice_test.conf`"</span>
</code></pre>
<p>In this case, wherever a config-file is expected in logdevice binaries, you can
instead use this:</p>
<pre><code class="hljs css language-shell-session">zk:<span class="hljs-number">10.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">2181</span>,<span class="hljs-number">10.0</span><span class="hljs-number">.0</span><span class="hljs-number">.2</span>:<span class="hljs-number">2181</span>,<span class="hljs-number">10.0</span><span class="hljs-number">.0</span><span class="hljs-number">.3</span>:<span class="hljs-number">2181</span>/logdevice_test.conf
# Example
--config-path /etc/logdevice.conf
# Becomes
--config-path zk:<span class="hljs-number">10.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">2181</span>,<span class="hljs-number">10.0</span><span class="hljs-number">.0</span><span class="hljs-number">.2</span>:<span class="hljs-number">2181</span>,<span class="hljs-number">10.0</span><span class="hljs-number">.0</span><span class="hljs-number">.3</span>:<span class="hljs-number">2181</span>/logdevice_test.conf
</code></pre>
<p>For the purposes of this tutorial, we will assume that you have distributed that
configuration file via some automation to all nodes and it lives under
<code>/etc/logdevice.conf</code> if you are using the binary setup, if you are using
docker, we assume here that the configuration file lives under
<code>/data/logdevice/logdevice.conf</code> and is mounted on all containers as shown in
the example commanda.</p>
<h2><a class="anchor" aria-hidden="true" id="7-start-the-admin-server-on-a-single-node"></a><a href="#7-start-the-admin-server-on-a-single-node" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7. Start the admin server on a single node</h2>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-19-tab-20" class="nav-link active" data-group="group_19" data-tab="tab-group-19-content-20">Docker</div><div id="tab-group-19-tab-21" class="nav-link" data-group="group_19" data-tab="tab-group-19-content-21">Binary</div></div><div class="tab-content"><div id="tab-group-19-content-20" class="tab-pane active" data-group="group_19" tabindex="-1"><div><span><pre><code class="hljs css language-shell-session"><span class="hljs-comment"># Also assumes that the configuration file is in /data/logdevice/logdevice.conf</span><br />docker run <span class="hljs-params">--rm</span> -d <span class="hljs-params">--network</span> host <span class="hljs-params">--name</span> logdevice-0 \<br />         -v <span class="hljs-string">/data/logdevice</span>:<span class="hljs-string">/data/logdevice</span> \<br />        facebookincubator/logdevice ld-admin-server \<br />          <span class="hljs-params">--config-path</span> <span class="hljs-string">/data/logdevice/logdevice.conf</span><br />          <span class="hljs-params">--enable-maintenance-manager</span><br />          <span class="hljs-params">--enable-safety-check-periodic-metadata-update</span><br />          <span class="hljs-params">--maintenance-log-snapshotting</span><br /></code></pre>
</span></div></div><div id="tab-group-19-content-21" class="tab-pane" data-group="group_19" tabindex="-1"><div><span><pre><code class="hljs css language-shell-session"># Assuming that the <span class="hljs-keyword">configuration</span> file <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> /etc/logdevice.conf<br />ld-<span class="hljs-keyword">admin</span>-<span class="hljs-keyword">server</span> <span class="hljs-comment">-- \</span><br />    <span class="hljs-comment">--config-path /etc/logdevice.conf \</span><br />    <span class="hljs-comment">--enable-maintenance-manager \</span><br />    <span class="hljs-comment">--enable-safety-check-periodic-metadata-update \</span><br />    <span class="hljs-comment">--maintenance-log-snapshotting</span><br /></code></pre>
</span></div></div></div></div>
<h2><a class="anchor" aria-hidden="true" id="8-start-logdeviced-on-every-node-3-options"></a><a href="#8-start-logdeviced-on-every-node-3-options" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>8. Start logdeviced on every node (3 options)</h2>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-22-tab-23" class="nav-link active" data-group="group_22" data-tab="tab-group-22-content-23">Docker</div><div id="tab-group-22-tab-24" class="nav-link" data-group="group_22" data-tab="tab-group-22-content-24">Binary</div></div><div class="tab-content"><div id="tab-group-22-content-23" class="tab-pane active" data-group="group_22" tabindex="-1"><div><span><pre><code class="hljs css language-shell-session"><span class="hljs-comment"># Assuming that data dir is at host's /data/logdevice (where shard0 lives)</span><br /><span class="hljs-comment"># Also assumes that the configuration file is in /data/logdevice/logdevice.conf</span><br /><span class="hljs-comment"># Assumes that docker host IP address is 172.16.0.2</span><br /><br />docker run <span class="hljs-params">--rm</span> -d <span class="hljs-params">--network</span> host <span class="hljs-params">--name</span> logdevice-0 \<br />         -v <span class="hljs-string">/data/logdevice</span>:<span class="hljs-string">/data/logdevice</span> \<br />        facebookincubator/logdevice logdeviced \<br />          <span class="hljs-params">--config-path</span> <span class="hljs-string">/data/logdevice/logdevice.conf</span> \<br />          <span class="hljs-params">--name</span> logdevice-0 \<br />          <span class="hljs-params">--address</span> 172.16.0.2 \<br />          <span class="hljs-params">--local-log-store-path</span> <span class="hljs-string">/data/logdevice</span><br /></code></pre>
</span></div></div><div id="tab-group-22-content-24" class="tab-pane" data-group="group_22" tabindex="-1"><div><span><pre><code class="hljs css language-shell-session"><span class="hljs-comment"># Assuming that the configuration file is in /etc/logdevice.conf</span><br /><span class="hljs-comment"># Assumes that the host IP address is 172.16.0.2</span><br /><span class="hljs-comment"># Uses the hostname as the logdevice node name</span><br />logdeviced \<br />  <span class="hljs-params">--config-path</span> <span class="hljs-string">/etc/logdevice.conf</span> \<br />  <span class="hljs-params">--name</span> $<span class="hljs-params">(hostname)</span> \<br />  <span class="hljs-params">--address</span> 172.16.0.2 \<br />  <span class="hljs-params">--local-log-store-path</span> <span class="hljs-string">/data/logdevice</span><br /></code></pre>
</span></div></div></div></div>
<h2><a class="anchor" aria-hidden="true" id="9-see-if-its-running"></a><a href="#9-see-if-its-running" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>9. See if it's running</h2>
<p><code>ldshell</code> is a utility to introspect and mutate the state of LogDevice. One of
its most powerful commands is <code>query</code>, which allows you to run SQL <code>SELECT</code>
queries against <a href="/docs/next/administration/LDQuery.html">various virtual SQL tables</a> that
expose the state of the cluster and some of its internals. The following command
queries the <code>info</code> table. The output displays the start time of the nodes that
are up, their pids and a couple more fields:</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-25-tab-26" class="nav-link active" data-group="group_25" data-tab="tab-group-25-content-26">Docker</div><div id="tab-group-25-tab-27" class="nav-link" data-group="group_25" data-tab="tab-group-25-content-27">Binary</div></div><div class="tab-content"><div id="tab-group-25-content-26" class="tab-pane active" data-group="group_25" tabindex="-1"><div><span><pre><code class="hljs css language-shell-session"># Assumes that the admin server host IP address <span class="hljs-keyword">is</span> <span class="hljs-number">172.16</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><br />docker run --rm -ti --network host facebookincubator/logdevice \<br />         ldshell --admin-server-host <span class="hljs-number">172.16</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><br /></code></pre>
</span></div></div><div id="tab-group-25-content-27" class="tab-pane" data-group="group_25" tabindex="-1"><div><span><pre><code class="hljs css language-shell-session"># Assumes that the admin server host IP address <span class="hljs-keyword">is</span> <span class="hljs-number">172.16</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><br />ldshell --admin-server-host <span class="hljs-number">172.16</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><br /></code></pre>
</span></div></div></div></div>
<p>Then inside the interactive session of ldshell you can run:</p>
<pre><code class="hljs css language-sh">ubuntu@logdevice1&gt; SELECT * FROM info
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="10-bootstrap-the-cluster"></a><a href="#10-bootstrap-the-cluster" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>10. Bootstrap the cluster</h2>
<p>Following the cluster <a href="/docs/next/administration/ClusterMaintenance.html#bootstrapping-the-cluster">bootstrapping
instructions</a>. We
should be able to bootstrap the nodes and configure the metadata logs
replication property.</p>
<blockquote>
<p>In this example setup, we are assuming that we will replicate the metadata
logs on 3 nodes without location awareness.</p>
</blockquote>
<p>In ldshell's interactive session, run:</p>
<pre><code class="hljs css language-shell-session">ubuntu@logdevice1&gt; nodes-config bootstrap <span class="hljs-attr">metadata-replicate-across=</span>{<span class="hljs-keyword">node</span><span class="hljs-title">:3</span>}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="11-check-cluster-status"></a><a href="#11-check-cluster-status" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>11. Check cluster status</h2>
<p>In a few seconds the cluster bootstrapping process should complete, and you
should see the output of the following command:</p>
<pre><code class="hljs css language-shell-session"><span class="hljs-symbol">ubuntu@</span>logdevice1&gt; status
</code></pre>
<p>It should look similar to this:</p>
<p><img src="/docs/assets/ldshell-status-1.png" alt="LDShell Screenshot" title="LDShell status example"></p>
<h2><a class="anchor" aria-hidden="true" id="11-create-log-ranges-using-ldshell"></a><a href="#11-create-log-ranges-using-ldshell" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>11. Create log ranges using ldshell</h2>
<p>Before you can write any data to LogDevice logs, you need to create them. By default, the cluster starts with an empty log list. To add a log range called <code>test_logs</code> with 100 logs where the data would be replicated across 2 nodes and trimmed after 3 days, run this command:</p>
<pre><code class="hljs css language-shell-session"># Assumes that the admin server host IP address <span class="hljs-keyword">is</span> <span class="hljs-number">172.16</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>
ldshell -s <span class="hljs-number">172.16</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span> logs create --replicate-across <span class="hljs-string">"node: 2"</span> --backlog <span class="hljs-string">"259200s"</span> --<span class="hljs-keyword">from</span> <span class="hljs-number">1</span> --to <span class="hljs-number">100</span> /test_logs
</code></pre>
<p>More information about managing your log configuration is available <a href="/docs/next/Logs.html">here</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="12-write-data-into-a-log"></a><a href="#12-write-data-into-a-log" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>12. Write data into a log</h2>
<p>All ready to go! You can now write your first payload into log 1:</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-28-tab-29" class="nav-link active" data-group="group_28" data-tab="tab-group-28-content-29">Docker</div><div id="tab-group-28-tab-30" class="nav-link" data-group="group_28" data-tab="tab-group-28-content-30">Binary</div></div><div class="tab-content"><div id="tab-group-28-content-29" class="tab-pane active" data-group="group_28" tabindex="-1"><div><span><pre><code class="hljs css language-shell-session">docker run <span class="hljs-params">--rm</span> -ti <span class="hljs-params">--network</span> host facebookincubator/logdevice <span class="hljs-string">/bin/bash</span><br /><br />$ <span class="hljs-keyword">echo</span> payload | ldwrite <span class="hljs-string">/data/logdevice/logdevice.conf</span> -l 1<br /></code></pre>
</span></div></div><div id="tab-group-28-content-30" class="tab-pane" data-group="group_28" tabindex="-1"><div><span><pre><code class="hljs css language-shell-session"><span class="hljs-keyword">echo</span> payload | ldwrite <span class="hljs-string">/etc/logdevice.conf</span> -l 1<br /></code></pre>
</span></div></div></div></div>
<h2><a class="anchor" aria-hidden="true" id="12-read-data-from-a-log"></a><a href="#12-read-data-from-a-log" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>12. Read data from a log</h2>
<p>This command runs the tailer for log 1. If you did the write above, it should print out &quot;payload&quot;.</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-31-tab-32" class="nav-link active" data-group="group_31" data-tab="tab-group-31-content-32">Docker</div><div id="tab-group-31-tab-33" class="nav-link" data-group="group_31" data-tab="tab-group-31-content-33">Binary</div></div><div class="tab-content"><div id="tab-group-31-content-32" class="tab-pane active" data-group="group_31" tabindex="-1"><div><span><pre><code class="hljs css language-shell-session">docker run <span class="hljs-params">--rm</span> -ti <span class="hljs-params">--network</span> host facebookincubator/logdevice <span class="hljs-string">/bin/bash</span><br /><br />$ ldtail <span class="hljs-string">/data/logdevice/logdevice.conf</span> -l 1<br /></code></pre>
</span></div></div><div id="tab-group-31-content-33" class="tab-pane" data-group="group_31" tabindex="-1"><div><span><pre><code class="hljs css language-shell-session">ldtail /etc/logdevice.conf -l <span class="hljs-number">1</span><br /></code></pre>
</span></div></div></div></div>
<h2><a class="anchor" aria-hidden="true" id="all-done"></a><a href="#all-done" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>All done!</h2>
<p>Congratulations! You have a running LogDevice cluster! Read the <a href="/docs/next/API_Introduction.html">Introduction to the API</a> to learn how to use it.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/next/Installation.html"><span class="arrow-prev">← </span><span class="function-name-prevnext">Build LogDevice</span></a><a class="docs-next button" href="/docs/next/Kubernetes.html"><span>Running on Kubernetes</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#1-provision-the-servers">1. Provision the servers</a></li><li><a href="#2-set-up-a-zookeeper-ensemble">2. Set up a ZooKeeper ensemble</a></li><li><a href="#3-distribute-logdevice-to-the-servers">3. Distribute LogDevice to the servers</a><ul class="toc-headings"><li><a href="#option-1-use-docker-image-recommended">Option 1. Use Docker image [Recommended]</a></li><li><a href="#option-2-build-logdevice">Option 2. Build LogDevice</a></li></ul></li><li><a href="#4-create-data-folders-on-storage-nodes">4. Create data folders on storage nodes</a></li><li><a href="#5-create-a-configuration-file">5. Create a configuration file</a></li><li><a href="#6-store-the-configuration-file">6. Store the configuration file</a></li><li><a href="#7-start-the-admin-server-on-a-single-node">7. Start the admin server on a single node</a></li><li><a href="#8-start-logdeviced-on-every-node-3-options">8. Start logdeviced on every node (3 options)</a></li><li><a href="#9-see-if-its-running">9. See if it's running</a></li><li><a href="#10-bootstrap-the-cluster">10. Bootstrap the cluster</a></li><li><a href="#11-check-cluster-status">11. Check cluster status</a></li><li><a href="#11-create-log-ranges-using-ldshell">11. Create log ranges using ldshell</a></li><li><a href="#12-write-data-into-a-log">12. Write data into a log</a></li><li><a href="#12-read-data-from-a-log">12. Read data from a log</a></li><li><a href="#all-done">All done!</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/logdevice.svg" alt="LogDevice" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/Overview.html">Getting Started</a><a href="/docs/FirstCluster.html">Creating your first cluster</a><a href="/api/annotated.html">C++ API Reference</a></div><div><h5>Community</h5><a href="https://facebook.com/groups/logdevice.oss/">LogDevice Users Group</a><a href="http://stackoverflow.com/questions/tagged/logdevice" target="_blank" rel="noreferrer noopener">Stack Overflow</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/facebookincubator/LogDevice">GitHub</a></div><div><h5>Legal</h5><a href="https://opensource.facebook.com/legal/privacy/" alt="Privacy" target="_blank" rel="noreferrer noopener">Privacy</a><a href="https://opensource.facebook.com/legal/terms/" alt="Terms" target="_blank" rel="noreferrer noopener">Terms</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2020 Facebook</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'f0ece773627cb7003a57c0edd6ec7dd8',
                indexName: 'logdevice',
                inputSelector: '#search_input_react'
              });
            </script></body></html>